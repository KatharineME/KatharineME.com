<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Katharine Medetgul-Ernar">
    <meta name="description" content="https://katharineme.com/">
    <meta name="keywords" content="blog,developer,personal">

    <meta property="og:site_name" content="Genome Analysis Blog">
    <meta property="og:title" content="
  JuliaDB - Genome Analysis Blog
">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://katharineme.com/posts/juliadb/">
    <meta property="og:image" content="https://katharineme.com/">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="https://katharineme.com/posts/juliadb/">
    <meta name="twitter:image" content="https://katharineme.com/">

    <base href="https://katharineme.com/posts/juliadb/">
    <title>
  JuliaDB - Genome Analysis Blog
</title>

    <link rel="canonical" href="https://katharineme.com/posts/juliadb/">
    
    <link  rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700">
    <link rel="stylesheet" href="/css/normalize.min.css">
    <link rel="stylesheet" href="/css/style.min.css">

    

    

    <link rel="icon" type="image/png" href="/images/favicon.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicon.png" sizes="16x16">

    
      <link rel="alternate" href="https://katharineme.com/index.xml" type="application/rss+xml" title="Genome Analysis Blog">
      <link href="https://katharineme.com/index.xml" rel="feed" type="application/rss+xml" title="Genome Analysis Blog" />
    

    <meta name="generator" content="Hugo 0.80.0" />
  </head>

  <body class="">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">Genome Analysis Blog</a>
    <input type="checkbox" id="menu-control"/>
    <label class="menu-mobile  float-right " for="menu-control">
      <span class="btn-mobile  float-right ">&#9776;</span>
      <ul class="navigation-list">
        
          
            <li class="navigation-item  align-center ">
              <a class="navigation-link" href="https://katharineme.com/posts">Posts</a>
            </li>
          
        
        
      </ul>
    </label>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
  <article>
    <header>
      <h1 class="title">JuliaDB</h1>
      <h2 class="date">February 19, 2021</h2>

      
    </header>

    <p>JuliaDB has two main data structures: Table and NDSparse.</p>
<h3 id="table">Table</h3>
<ul>
<li>Tables store data in columns</li>
<li>Tables are typed, meaning changing a table requires returning a new table</li>
<li>Julidb has few mutating operations because a new table is necessary in most</li>
</ul>
<h4 id="indexed-table">Indexed Table</h4>
<ul>
<li>Basically a named tuple of vectors which <strong>behaves</strong> like a vector of named tuples</li>
<li>Table can be sorted by any number of primary keys (defined using parameter <code>pkey</code>). The table will be sorted by the first priamry key, then the second, and so on.</li>
<li>Use <code>table</code> function to create or <code>loadtable</code> to load existing data</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-julia" data-lang="julia"><span class="n">julia</span> <span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="o">:</span><span class="mi">6</span>
<span class="n">julia</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">vcat</span><span class="p">(</span><span class="n">fill</span><span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">fill</span><span class="p">(</span><span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">julia</span> <span class="o">&gt;</span> <span class="n">z</span> <span class="o">=</span> <span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>

<span class="n">julia</span> <span class="o">&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">table</span><span class="p">((</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">);</span> <span class="n">pkey</span> <span class="o">=</span> <span class="p">[</span><span class="o">:</span><span class="n">x</span><span class="p">,</span> <span class="o">:</span><span class="n">y</span><span class="p">])</span>

<span class="n">Table</span> <span class="n">with</span> <span class="mi">6</span> <span class="n">rows</span><span class="p">,</span> <span class="mi">3</span> <span class="n">columns</span><span class="o">:</span>
<span class="n">x</span>  <span class="n">y</span>    <span class="n">z</span>
<span class="n">─────────────────</span>
<span class="mi">1</span>  <span class="sc">&#39;a&#39;</span>  <span class="mf">1.06936</span>
<span class="mi">2</span>  <span class="sc">&#39;a&#39;</span>  <span class="o">-</span><span class="mf">1.29235</span>
<span class="mi">3</span>  <span class="sc">&#39;a&#39;</span>  <span class="o">-</span><span class="mf">0.725817</span>
<span class="mi">4</span>  <span class="sc">&#39;b&#39;</span>  <span class="o">-</span><span class="mf">0.422334</span>
<span class="mi">5</span>  <span class="sc">&#39;b&#39;</span>  <span class="mf">0.0246361</span>
<span class="mi">6</span>  <span class="sc">&#39;b&#39;</span>  <span class="mf">0.669536</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-julia" data-lang="julia"><span class="n">julia</span> <span class="o">&gt;</span> <span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="mf">1.069356265804105</span><span class="p">)</span>
</code></pre></div><h3 id="ndsparse">NDSparse</h3>
<ul>
<li>Behaves like a sparse array with arbitrary indices</li>
<li>The keys of an NDSparse array are sorted</li>
<li>Use <code>loadndsparse</code> to load existing data</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-julia" data-lang="julia"><span class="n">nd</span> <span class="o">=</span> <span class="n">ndsparse</span><span class="p">((</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">,))</span>

<span class="mi">2</span><span class="o">-</span><span class="n">d</span> <span class="n">NDSparse</span> <span class="n">with</span> <span class="mi">6</span> <span class="n">values</span> <span class="p">(</span><span class="mi">1</span> <span class="n">field</span> <span class="n">named</span> <span class="n">tuples</span><span class="p">)</span><span class="o">:</span>
<span class="n">x</span>  <span class="n">y</span>   <span class="n">│</span> <span class="n">z</span>
<span class="n">───────┼──────────</span>
<span class="mi">1</span>  <span class="sc">&#39;a&#39;</span> <span class="n">│</span> <span class="mf">1.0548</span>
<span class="mi">2</span>  <span class="sc">&#39;a&#39;</span> <span class="n">│</span> <span class="mf">1.64493</span>
<span class="mi">3</span>  <span class="sc">&#39;a&#39;</span> <span class="n">│</span> <span class="o">-</span><span class="mf">0.738508</span>
<span class="mi">4</span>  <span class="sc">&#39;b&#39;</span> <span class="n">│</span> <span class="mf">0.325126</span>
<span class="mi">5</span>  <span class="sc">&#39;b&#39;</span> <span class="n">│</span> <span class="mf">0.299526</span>
<span class="mi">6</span>  <span class="sc">&#39;b&#39;</span> <span class="n">│</span> <span class="mf">0.787615</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-julia" data-lang="julia"><span class="n">nd</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="sc">&#39;a&#39;</span><span class="p">]</span>

<span class="p">(</span><span class="n">z</span> <span class="o">=</span> <span class="mf">1.0548018299672375</span><span class="p">,)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-julia" data-lang="julia"><span class="n">nd</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="sc">&#39;a&#39;</span><span class="p">]</span>

<span class="mi">1</span><span class="o">-</span><span class="n">d</span> <span class="n">NDSparse</span> <span class="n">with</span> <span class="mi">3</span> <span class="n">values</span> <span class="p">(</span><span class="mi">1</span> <span class="n">field</span> <span class="n">named</span> <span class="n">tuples</span><span class="p">)</span><span class="o">:</span>
<span class="n">x</span> <span class="n">│</span> <span class="n">z</span>
<span class="n">──┼──────────</span>
<span class="mi">1</span> <span class="n">│</span> <span class="mf">1.0548</span>
<span class="mi">2</span> <span class="n">│</span> <span class="mf">1.64493</span>
<span class="mi">3</span> <span class="n">│</span> <span class="o">-</span><span class="mf">0.738508</span>
</code></pre></div><h3 id="select-data">Select Data</h3>
<p>There are a few JuliaDB functions used for selecting data: <code>select</code>, <code>reduce</code>, <code>groupreduce</code>, <code>groupby</code>, <code>join</code>, <code>transform</code>, and <code>reindex</code>.</p>
<p>Selecting a column. This is the same as <code>select(t, :x)</code></p>
<div class="highlight"><pre class="chroma"><code class="language-julia" data-lang="julia"><span class="n">julia</span> <span class="o">&gt;</span> <span class="n">select</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="mi">6</span><span class="o">-</span><span class="n">element</span> <span class="kt">Array</span><span class="p">{</span><span class="kt">Int64</span><span class="p">,</span><span class="mi">1</span><span class="p">}</span><span class="o">:</span>
 <span class="mi">1</span>
 <span class="mi">2</span>
 <span class="mi">3</span>
 <span class="mi">4</span>
 <span class="mi">5</span>
 <span class="mi">6</span>
</code></pre></div><h3 id="api">API</h3>
<p><a href="https://juliadb.juliadata.org/latest/api/">More on JuliaDB API.</a></p>
<h3 id="statistics">Statistics</h3>
<p>JuliaDB integrates with OnlineStats (a julia stats package) using the functions <code>reduce</code> and <code>groupreduce</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-julia" data-lang="julia"><span class="n">julia</span> <span class="o">&gt;</span> <span class="k">using</span> <span class="n">JuliaDB</span><span class="p">,</span> <span class="n">OnlineStats</span>
<span class="n">julia</span> <span class="o">&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">table</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="mi">100</span><span class="p">,</span> <span class="n">rand</span><span class="p">(</span><span class="kt">Bool</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">));</span>
<span class="n">julia</span> <span class="o">&gt;</span> <span class="n">reduce</span><span class="p">(</span><span class="n">Mean</span><span class="p">(),</span> <span class="n">t</span><span class="p">;</span> <span class="n">select</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">Mean</span><span class="o">:</span> <span class="n">n</span><span class="o">=</span><span class="mi">100</span> <span class="o">|</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.159962</span>
</code></pre></div>
  </article>

  <br/>
  
</section>

      </div>
      
    </main>

    

  <script src="/js/app.js"></script>
  
  </body>
</html>
