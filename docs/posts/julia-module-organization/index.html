<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Katharine Medetgul-Ernar">
    <meta name="description" content="https://katharineme.com/">
    <meta name="keywords" content="blog,developer,personal">

    <meta property="og:site_name" content="The Art of Genome Analysis">
    <meta property="og:title" content="
  Julia Module Organization - The Art of Genome Analysis
">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://katharineme.com/posts/julia-module-organization/">
    <meta property="og:image" content="https://katharineme.com/">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="https://katharineme.com/posts/julia-module-organization/">
    <meta name="twitter:image" content="https://katharineme.com/">

    <base href="https://katharineme.com/posts/julia-module-organization/">
    <title>
  Julia Module Organization - The Art of Genome Analysis
</title>

    <link rel="canonical" href="https://katharineme.com/posts/julia-module-organization/">
    
    <link  rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700">
    <link rel="stylesheet" href="/css/normalize.min.css">
    <link rel="stylesheet" href="/css/style.min.css">

    

    

    <link rel="icon" type="image/png" href="/images/favicon.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicon.png" sizes="16x16">

    
      <link rel="alternate" href="https://katharineme.com/index.xml" type="application/rss+xml" title="The Art of Genome Analysis">
      <link href="https://katharineme.com/index.xml" rel="feed" type="application/rss+xml" title="The Art of Genome Analysis" />
    

    <meta name="generator" content="Hugo 0.89.2" />
  </head>

  <body class="">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">The Art of Genome Analysis</a>
    <input type="checkbox" id="menu-control"/>
    <label class="menu-mobile  float-right " for="menu-control">
      <span class="btn-mobile  float-right ">&#9776;</span>
      <ul class="navigation-list">
        
          
            <li class="navigation-item  align-center ">
              <a class="navigation-link" href="https://katharineme.com/posts">Posts</a>
            </li>
          
        
        
      </ul>
    </label>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
  <article>
    <header>
      <h1 class="title">Julia Module Organization</h1>
      <h2 class="date">July 26, 2021</h2>

      
    </header>

    <h2 id="what-is-a-module">What is a Module?</h2>
<p>A module is a self contained unit of code with a separate global scope namespace. It can only see what is inside itself. A module is defined with <code>module NameOfModule ... end</code>. A module can contain files and other modules.</p>
<h2 id="include-vs-using">include vs. using</h2>
<p><code>include</code> and <code>using</code> are two ways of accessing code in Julia. <code>using</code> tells Julia to reference something that has already been defined, while <code>include</code> tells Julia to copy and define code that was not previously defined. <code>include</code> should only be run once. Thereafter <code>using</code> should be used to access it.</p>
<h2 id="example-module">Example Module</h2>
<p>This is the Kate.jl file that defines the Kate module. Everytime there is an include statement, you can imagine the code in that file being copied and pasted into this Kate.jl file.</p>
<p>Modules A and B have no knowledge of eachother, nor do they know they belong to module Kate. Whereas module Kate knows modules A and B and each of their files.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-julia" data-lang="julia">
<span class="k">module</span> <span class="n">Kate</span>

<span class="k">module</span> <span class="n">A</span>

<span class="n">include</span><span class="p">(</span><span class="n">f1</span><span class="o">.</span><span class="n">jl</span><span class="p">)</span>
<span class="n">include</span><span class="p">(</span><span class="n">f2</span><span class="o">.</span><span class="n">jl</span><span class="p">)</span>
<span class="n">include</span><span class="p">(</span><span class="n">f3</span><span class="o">.</span><span class="n">jl</span><span class="p">)</span>

<span class="k">end</span>

<span class="k">module</span> <span class="n">B</span>

<span class="n">include</span><span class="p">(</span><span class="n">f4</span><span class="o">.</span><span class="n">jl</span><span class="p">)</span>
<span class="n">include</span><span class="p">(</span><span class="n">f5</span><span class="o">.</span><span class="n">jl</span><span class="p">)</span>

<span class="k">end</span>

<span class="n">include</span><span class="p">(</span><span class="n">f6</span><span class="o">.</span><span class="n">jl</span><span class="p">)</span>

<span class="k">end</span>

</code></pre></div><p>The f1.jl file for example looks like this. In order for Kate module to see the <code>f1</code> function, it must be exported at the end of the file. If there are multiple methods for one functions, all will be exported with a single export statement.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-julia" data-lang="julia">
<span class="k">function</span> <span class="n">f1</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="k">return</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span><span class="mi">5</span><span class="p">)</span>

<span class="k">end</span>

<span class="k">export</span> <span class="n">f1</span>
</code></pre></div><p>Now in a Jupyter notebook I&rsquo;ll be able to run the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">
using Kate

Kate.A.f1()

Kate.B.f5()

Kate.f6()

</code></pre></div><h2 id="dependencies-within-a-module">Dependencies Within a Module</h2>
<h3 id="a-function-in-one-module-calls-another-function-in-the-same-module">A function in one module calls another function in the same module</h3>
<p>f2 calls f3. f3 can be called directly in f2 becuase they are within the same module.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-julia" data-lang="julia">
<span class="k">function</span> <span class="n">f2</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">f3</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>

<span class="k">end</span>

</code></pre></div><h3 id="a-function-in-one-module-calls-a-function-in-another-module">A function in one module calls a function in another module</h3>
<p>f4 calls f1. <code>using ..A: f1</code> tells julia to reference the previously defined f1 function from the A module. The two dots <code>..</code> are used to go one level up from the current module.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-julia" data-lang="julia">
<span class="k">using</span> <span class="o">..</span><span class="n">A</span><span class="o">:</span> <span class="n">f1</span>

<span class="k">function</span> <span class="n">f4</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">f1</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="k">end</span>

</code></pre></div><h2 id="order-matters-when-defining-a-module">Order Matters When Defining a Module</h2>
<p>In order for f4 to use f1, module A must be defined before module B in Kate.jl. If the their order was reversed, julia would throw an error when it tried to call <code>using ..A: f1</code> because module A would not have been defined yet. Here is another illustration of why order matters in a module file like Kate.jl. This module file will throw an error because when <code>a = b</code> is evaluated, <code>b</code> has not been defined.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-julia" data-lang="julia">
<span class="k">module</span> <span class="n">Kate</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">b</span>

<span class="n">b</span> <span class="o">=</span> <span class="mi">5</span>

<span class="k">end</span>
</code></pre></div><p>However, this module file works. It doesnt matter that function <code>a</code> calls <code>b</code>and <code>a</code> comes before <code>b</code> becuase they are not being executed, they are merely being defined.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-julia" data-lang="julia">
<span class="k">module</span> <span class="n">Kate</span>

<span class="k">function</span> <span class="n">a</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">b</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="k">end</span>

<span class="k">function</span> <span class="n">b</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="k">return</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span><span class="mi">5</span><span class="p">)</span>

<span class="k">end</span>

<span class="k">end</span>
</code></pre></div>
  </article>

  <br/>
  
</section>

      </div>
      
    </main>

    

  <script src="/js/app.js"></script>
  
  </body>
</html>
